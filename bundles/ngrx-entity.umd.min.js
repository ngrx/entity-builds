!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@ngrx/store"),require("@angular/core")):"function"==typeof define&&define.amd?define("@ngrx/entity",["exports","@ngrx/store","@angular/core"],t):t(((e=e||self).ngrx=e.ngrx||{},e.ngrx.entity={}),e.store,e.ng.core)}(this,(function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return u},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},u={EntitiesOnly:0,Both:1,None:2};function s(e){return function(t,n){var i={ids:o(n.ids),entities:r({},n.entities)},s=e(t,i);return s===u.Both?Object.assign({},n,i):s===u.EntitiesOnly?r(r({},n),{entities:i.entities}):n}}function a(e,t){var r=t(e);return n.isDevMode()&&void 0===r&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",e,"The `selectId` implementation:",t.toString()),r}u[u.EntitiesOnly]="EntitiesOnly",u[u.Both]="Both",u[u.None]="None";var c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function l(e){function t(t,n){var r=a(t,e);return r in n.entities?u.None:(n.ids.push(r),n.entities[r]=t,u.Both)}function n(e,n){var r,i,o=!1;try{for(var s=c(e),a=s.next();!a.done;a=s.next()){o=t(a.value,n)!==u.None||o}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o?u.Both:u.None}function r(e,t){return t.ids=[],t.entities={},n(e,t),u.Both}function i(e,t){var n=(e instanceof Array?e:t.ids.filter((function(n){return e(t.entities[n])}))).filter((function(e){return e in t.entities})).map((function(e){return delete t.entities[e]})).length>0;return n&&(t.ids=t.ids.filter((function(e){return e in t.entities}))),n?u.Both:u.None}function o(t,n){var r={};return(t=t.filter((function(e){return e.id in n.entities}))).length>0?t.filter((function(t){return function(t,n,r){var i=r.entities[n.id],o=Object.assign({},i,n.changes),u=a(o,e),s=u!==n.id;return s&&(t[n.id]=u,delete r.entities[n.id]),r.entities[u]=o,s}(r,t,n)})).length>0?(n.ids=n.ids.map((function(e){return r[e]||e})),u.Both):u.EntitiesOnly:u.None}function l(t,r){var i,s,l=[],f=[];try{for(var d=c(t),h=d.next();!h.done;h=d.next()){var v=h.value,y=a(v,e);y in r.entities?f.push({id:y,changes:v}):l.push(v)}}catch(e){i={error:e}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}var p=o(f,r),g=n(l,r);switch(!0){case g===u.None&&p===u.None:return u.None;case g===u.Both||p===u.Both:return u.Both;default:return u.EntitiesOnly}}return{removeAll:function(e){return Object.assign({},e,{ids:[],entities:{}})},addOne:s(t),addMany:s(n),addAll:s(r),setAll:s(r),setOne:s((function(t,n){var r=a(t,e);return r in n.entities?(n.entities[r]=t,u.EntitiesOnly):(n.ids.push(r),n.entities[r]=t,u.Both)})),updateOne:s((function(e,t){return o([e],t)})),updateMany:s(o),upsertOne:s((function(e,t){return l([e],t)})),upsertMany:s(l),removeOne:s((function(e,t){return i([e],t)})),removeMany:s(i),map:s((function(e,t){return o(t.ids.reduce((function(n,r){var i=e(t.entities[r]);return i!==t.entities[r]&&n.push({id:r,changes:i}),n}),[]).filter((function(e){return e.id in t.entities})),t)}))}}var f=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function d(e,t){var n=l(e);function r(e,t){return i([e],t)}function i(t,n){var r=t.filter((function(t){return!(a(t,e)in n.entities)}));return 0===r.length?u.None:(h(r,n),u.Both)}function o(e,t){return t.entities={},t.ids=[],i(e,t),u.Both}function c(t,n){var r=[],i=t.filter((function(t){return function(t,n,r){if(!(n.id in r.entities))return!1;var i=r.entities[n.id],o=Object.assign({},i,n.changes),u=a(o,e);return delete r.entities[n.id],t.push(o),u!==n.id}(r,t,n)})).length>0;if(0===r.length)return u.None;var o=n.ids,s=[];return n.ids=n.ids.filter((function(e,t){return e in n.entities||(s.push(t),!1)})),h(r,n),!i&&s.every((function(e){return n.ids[e]===o[e]}))?u.EntitiesOnly:u.Both}function d(t,n){var r,o,s=[],l=[];try{for(var d=f(t),h=d.next();!h.done;h=d.next()){var v=h.value,y=a(v,e);y in n.entities?l.push({id:y,changes:v}):s.push(v)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}var p=c(l,n),g=i(s,n);switch(!0){case g===u.None&&p===u.None:return u.None;case g===u.Both||p===u.Both:return u.Both;default:return u.EntitiesOnly}}function h(n,r){n.sort(t);for(var i=[],o=0,u=0;o<n.length&&u<r.ids.length;){var s=n[o],c=a(s,e),l=r.ids[u],f=r.entities[l];t(s,f)<=0?(i.push(c),o++):(i.push(l),u++)}o<n.length?r.ids=i.concat(n.slice(o).map(e)):r.ids=i.concat(r.ids.slice(u)),n.forEach((function(t,n){r.entities[e(t)]=t}))}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:s(r),updateOne:s((function(e,t){return c([e],t)})),upsertOne:s((function(e,t){return d([e],t)})),addAll:s(o),setAll:s(o),setOne:s((function(t,n){var i=a(t,e);return i in n.entities?(n.ids=n.ids.filter((function(e){return e!==i})),h([t],n),u.Both):r(t,n)})),addMany:s(i),updateMany:s(c),upsertMany:s(d),map:s((function(e,t){return c(t.ids.reduce((function(n,r){var i=e(t.entities[r]);return i!==t.entities[r]&&n.push({id:r,changes:i}),n}),[]),t)}))}}var h=this&&this.__assign||function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};var v=function(){};e.Dictionary=v,e.createEntityAdapter=function(e){void 0===e&&(e={});var n=h({sortComparer:!1,selectId:function(e){return e.id}},e),r=n.selectId,i=n.sortComparer,o={getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}},u={getSelectors:function(e){var n=function(e){return e.ids},r=function(e){return e.entities},i=t.createSelector(n,r,(function(e,t){return e.map((function(e){return t[e]}))})),o=t.createSelector(n,(function(e){return e.length}));return e?{selectIds:t.createSelector(e,n),selectEntities:t.createSelector(e,r),selectAll:t.createSelector(e,i),selectTotal:t.createSelector(e,o)}:{selectIds:n,selectEntities:r,selectAll:i,selectTotal:o}}},s=i?d(r,i):l(r);return h(h(h({selectId:r,sortComparer:i},o),u),s)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngrx-entity.umd.min.js.map