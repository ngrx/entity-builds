/**
 * @license NgRx 9.0.0-beta.1+7.sha-37f91db
 * (c) 2015-2018 Brandon Roberts, Mike Ryan, Rob Wormald, Victor Savkin
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("tslib"),require("@ngrx/store"),require("@angular/core")):"function"==typeof define&&define.amd?define("@ngrx/entity",["exports","tslib","@ngrx/store","@angular/core"],t):t(((e=e||self).ngrx=e.ngrx||{},e.ngrx.entity={}),e.tslib,e.ngrx.store,e.ng.core)}(this,(function(e,t,n,r){"use strict";var i;function o(e){return function n(r,o){var s={ids:t.__spread(o.ids),entities:t.__assign({},o.entities)},u=e(r,s);return u===i.Both?Object.assign({},o,s):u===i.EntitiesOnly?t.__assign(t.__assign({},o),{entities:s.entities}):o}}function s(e,t){var n=t(e);return r.isDevMode()&&void 0===n&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",e,"The `selectId` implementation:",t.toString()),n}function u(e){function n(t,n){var r=s(t,e);return r in n.entities?i.None:(n.ids.push(r),n.entities[r]=t,i.Both)}function r(e,r){var o,s,u=!1;try{for(var a=t.__values(e),c=a.next();!c.done;c=a.next())u=n(c.value,r)!==i.None||u}catch(e){o={error:e}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}return u?i.Both:i.None}function u(e,t){return t.ids=[],t.entities={},r(e,t),i.Both}function a(e,t){var n=(e instanceof Array?e:t.ids.filter((function(n){return e(t.entities[n])}))).filter((function(e){return e in t.entities})).map((function(e){return delete t.entities[e]})).length>0;return n&&(t.ids=t.ids.filter((function(e){return e in t.entities}))),n?i.Both:i.None}function c(t,n){var r={};return(t=t.filter((function(e){return e.id in n.entities}))).length>0?t.filter((function(t){return function i(t,n,r){var i=Object.assign({},r.entities[n.id],n.changes),o=s(i,e),u=o!==n.id;return u&&(t[n.id]=o,delete r.entities[n.id]),r.entities[o]=i,u}(r,t,n)})).length>0?(n.ids=n.ids.map((function(e){return r[e]||e})),i.Both):i.EntitiesOnly:i.None}function l(n,o){var u,a,l=[],d=[];try{for(var f=t.__values(n),h=f.next();!h.done;h=f.next()){var v=h.value,p=s(v,e);p in o.entities?d.push({id:p,changes:v}):l.push(v)}}catch(e){u={error:e}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(u)throw u.error}}var y=c(d,o),g=r(l,o);switch(!0){case g===i.None&&y===i.None:return i.None;case g===i.Both||y===i.Both:return i.Both;default:return i.EntitiesOnly}}return{removeAll:function d(e){return Object.assign({},e,{ids:[],entities:{}})},addOne:o(n),addMany:o(r),addAll:o(u),setAll:o(u),updateOne:o((function f(e,t){return c([e],t)})),updateMany:o(c),upsertOne:o((function h(e,t){return l([e],t)})),upsertMany:o(l),removeOne:o((function v(e,t){return a([e],t)})),removeMany:o(a),map:o((function p(e,t){return c(t.ids.reduce((function(n,r){var i=e(t.entities[r]);return i!==t.entities[r]&&n.push({id:r,changes:i}),n}),[]).filter((function(e){return e.id in t.entities})),t)}))}}!function(e){e[e.EntitiesOnly=0]="EntitiesOnly",e[e.Both=1]="Both",e[e.None=2]="None"}(i||(i={})),e.Dictionary=function a(){},e.createEntityAdapter=function c(e){void 0===e&&(e={});var r=t.__assign({sortComparer:!1,selectId:function(e){return e.id}},e),a=r.selectId,c=r.sortComparer,l=function d(){return{getInitialState:function e(t){return void 0===t&&(t={}),Object.assign({ids:[],entities:{}},t)}}}(),f=function h(){return{getSelectors:function e(t){var r=function(e){return e.ids},i=function(e){return e.entities},o=n.createSelector(r,i,(function(e,t){return e.map((function(e){return t[e]}))})),s=n.createSelector(r,(function(e){return e.length}));return t?{selectIds:n.createSelector(t,r),selectEntities:n.createSelector(t,i),selectAll:n.createSelector(t,o),selectTotal:n.createSelector(t,s)}:{selectIds:r,selectEntities:i,selectAll:o,selectTotal:s}}}}(),v=c?function p(e,n){var r=u(e);function a(t,n){var r=t.filter((function(t){return!(s(t,e)in n.entities)}));return 0===r.length?i.None:(f(r,n),i.Both)}function c(e,t){return t.entities={},t.ids=[],a(e,t),i.Both}function l(t,n){var r=[],o=t.filter((function(t){return function i(t,n,r){if(!(n.id in r.entities))return!1;var i=Object.assign({},r.entities[n.id],n.changes),o=s(i,e);return delete r.entities[n.id],t.push(i),o!==n.id}(r,t,n)})).length>0;if(0===r.length)return i.None;var u=n.ids,a=[];return n.ids=n.ids.filter((function(e,t){return e in n.entities||(a.push(t),!1)})),f(r,n),!o&&a.every((function(e){return n.ids[e]===u[e]}))?i.EntitiesOnly:i.Both}function d(n,r){var o,u,c=[],d=[];try{for(var f=t.__values(n),h=f.next();!h.done;h=f.next()){var v=h.value,p=s(v,e);p in r.entities?d.push({id:p,changes:v}):c.push(v)}}catch(e){o={error:e}}finally{try{h&&!h.done&&(u=f.return)&&u.call(f)}finally{if(o)throw o.error}}var y=l(d,r),g=a(c,r);switch(!0){case g===i.None&&y===i.None:return i.None;case g===i.Both||y===i.Both:return i.Both;default:return i.EntitiesOnly}}function f(t,r){t.sort(n);for(var i=[],o=0,u=0;o<t.length&&u<r.ids.length;){var a=t[o],c=s(a,e),l=r.ids[u];n(a,r.entities[l])<=0?(i.push(c),o++):(i.push(l),u++)}r.ids=i.concat(o<t.length?t.slice(o).map(e):r.ids.slice(u)),t.forEach((function(t,n){r.entities[e(t)]=t}))}return{removeOne:r.removeOne,removeMany:r.removeMany,removeAll:r.removeAll,addOne:o((function h(e,t){return a([e],t)})),updateOne:o((function v(e,t){return l([e],t)})),upsertOne:o((function p(e,t){return d([e],t)})),addAll:o(c),setAll:o(c),addMany:o(a),updateMany:o(l),upsertMany:o(d),map:o((function y(e,t){return l(t.ids.reduce((function(n,r){var i=e(t.entities[r]);return i!==t.entities[r]&&n.push({id:r,changes:i}),n}),[]),t)}))}}(a,c):u(a);return t.__assign(t.__assign(t.__assign({selectId:a,sortComparer:c},l),f),v)},Object.defineProperty(e,"__esModule",{value:!0})}));