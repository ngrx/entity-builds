!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@ngrx/store")):"function"==typeof define&&define.amd?define(["exports","@ngrx/store"],t):t((e.ngrx=e.ngrx||{},e.ngrx.entity={}),e.ngrx.store)}(this,function(e,t){"use strict";function n(e){return function(t,n){var i={ids:n.ids.slice(),entities:Object.assign({},n.entities)},r=e(t,i);return r===s.Both?Object.assign({},n,i):r===s.EntitiesOnly?Object.assign({},n,{entities:i.entities}):n}}function i(e){function t(t,n){var i=e(t);return i in n.entities?s.None:(n.ids.push(i),n.entities[i]=t,s.Both)}function i(e,n){var i=!1;for(var r in e)i=t(e[r],n)!==s.None||i;return i?s.Both:s.None}function r(e,t){var n=e.filter(function(e){return e in t.entities}).map(function(e){return delete t.entities[e]}).length>0;return n&&(t.ids=t.ids.filter(function(e){return e in t.entities})),n?s.Both:s.None}function o(t,n){var i={};if((t=t.filter(function(e){return e.id in n.entities})).length>0){return t.filter(function(t){return function(t,n,i){var r=i.entities[n.id],o=Object.assign({},r,n.changes),s=e(o),u=s!==n.id;return u&&(t[n.id]=s,delete i.entities[n.id]),i.entities[s]=o,u}(i,t,n)}).length>0?(n.ids=n.ids.map(function(e){return i[e]||e}),s.Both):s.EntitiesOnly}return s.None}return{removeAll:function(e){return Object.assign({},e,{ids:[],entities:{}})},addOne:n(t),addMany:n(i),addAll:n(function(e,t){return t.ids=[],t.entities={},i(e,t),s.Both}),updateOne:n(function(e,t){return o([e],t)}),updateMany:n(o),removeOne:n(function(e,t){return r([e],t)}),removeMany:n(r)}}function r(e,t){function r(t,n){var i=t.filter(function(t){return!(e(t)in n.entities)});return 0===i.length?s.None:(u(i,n),s.Both)}function o(t,n){var i=[],r=t.filter(function(t){return function(t,n,i){if(!(n.id in i.entities))return!1;var r=i.entities[n.id],o=Object.assign({},r,n.changes),s=e(o);return delete i.entities[n.id],t.push(o),s!==n.id}(i,t,n)}).length>0;if(0===i.length)return s.None;var o=n.ids,c=[];return n.ids=n.ids.filter(function(e,t){return e in n.entities||(c.push(t),!1)}),u(i,n),!r&&c.every(function(e){return n.ids[e]===o[e]})?s.EntitiesOnly:s.Both}function u(n,i){n.sort(t);for(var r=[],o=0,s=0;o<n.length&&s<i.ids.length;){var u=n[o],c=e(u),a=i.ids[s],d=i.entities[a];t(u,d)<=0?(r.push(c),o++):(r.push(a),s++)}o<n.length?i.ids=r.concat(n.slice(o).map(e)):i.ids=r.concat(i.ids.slice(s)),n.forEach(function(t,n){i.entities[e(t)]=t})}var c=i(e);return{removeOne:c.removeOne,removeMany:c.removeMany,removeAll:c.removeAll,addOne:n(function(e,t){return r([e],t)}),updateOne:n(function(e,t){return o([e],t)}),addAll:n(function(e,t){return t.entities={},t.ids=[],r(e,t),s.Both}),addMany:n(r),updateMany:n(o)}}function o(e){void 0===e&&(e={});var n=Object.assign({sortComparer:!1,selectId:function(e){return e.id}},e),o=n.selectId,s=n.sortComparer,u={getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}},c={getSelectors:function(e){var n=function(e){return e.ids},i=function(e){return e.entities},r=t.createSelector(n,i,function(e,t){return e.map(function(e){return t[e]})}),o=t.createSelector(n,function(e){return e.length});return e?{selectIds:t.createSelector(e,n),selectEntities:t.createSelector(e,i),selectAll:t.createSelector(e,r),selectTotal:t.createSelector(e,o)}:{selectIds:n,selectEntities:i,selectAll:r,selectTotal:o}}},a=s?r(o,s):i(o);return Object.assign({},u,c,a)}var s={EntitiesOnly:0,Both:1,None:2};s[s.EntitiesOnly]="EntitiesOnly",s[s.Both]="Both",s[s.None]="None",e.createEntityAdapter=o,Object.defineProperty(e,"__esModule",{value:!0})});