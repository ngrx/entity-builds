/**
 * @license NgRx 7.4.0
 * (c) 2015-2018 Brandon Roberts, Mike Ryan, Rob Wormald, Victor Savkin
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@ngrx/store"),require("@angular/core")):"function"==typeof define&&define.amd?define("@ngrx/entity",["exports","@ngrx/store","@angular/core"],t):t(((e=e||self).ngrx=e.ngrx||{},e.ngrx.entity={}),e["@ngrx/store"],e.ng.core)}(this,function(e,t,n){"use strict";var r,i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return u},u=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};function c(e){return function t(n,o){var c={ids:u(o.ids),entities:i({},o.entities)},s=e(n,c);return s===r.Both?Object.assign({},o,c):s===r.EntitiesOnly?i({},o,{entities:c.entities}):o}}function s(e,t){var r=t(e);return n.isDevMode()&&void 0===r&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",e,"The `selectId` implementation:",t.toString()),r}!function(e){e[e.EntitiesOnly=0]="EntitiesOnly",e[e.Both=1]="Both",e[e.None=2]="None"}(r||(r={}));var a=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};function l(e){function t(t,n){var i=s(t,e);return i in n.entities?r.None:(n.ids.push(i),n.entities[i]=t,r.Both)}function n(e,n){var i,o,u=!1;try{for(var c=a(e),s=c.next();!s.done;s=c.next())u=t(s.value,n)!==r.None||u}catch(e){i={error:e}}finally{try{s&&!s.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u?r.Both:r.None}function i(e,t){var n=(e instanceof Array?e:t.ids.filter(function(n){return e(t.entities[n])})).filter(function(e){return e in t.entities}).map(function(e){return delete t.entities[e]}).length>0;return n&&(t.ids=t.ids.filter(function(e){return e in t.entities})),n?r.Both:r.None}function o(t,n){var i={};return(t=t.filter(function(e){return e.id in n.entities})).length>0?t.filter(function(t){return function r(t,n,i){var o=Object.assign({},i.entities[n.id],n.changes),u=s(o,e),c=u!==n.id;return c&&(t[n.id]=u,delete i.entities[n.id]),i.entities[u]=o,c}(i,t,n)}).length>0?(n.ids=n.ids.map(function(e){return i[e]||e}),r.Both):r.EntitiesOnly:r.None}function u(t,i){var u,c,l=[],f=[];try{for(var d=a(t),h=d.next();!h.done;h=d.next()){var v=h.value,y=s(v,e);y in i.entities?f.push({id:y,changes:v}):l.push(v)}}catch(e){u={error:e}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}var p=o(f,i),g=n(l,i);switch(!0){case g===r.None&&p===r.None:return r.None;case g===r.Both||p===r.Both:return r.Both;default:return r.EntitiesOnly}}return{removeAll:function l(e){return Object.assign({},e,{ids:[],entities:{}})},addOne:c(t),addMany:c(n),addAll:c(function f(e,t){return t.ids=[],t.entities={},n(e,t),r.Both}),updateOne:c(function d(e,t){return o([e],t)}),updateMany:c(o),upsertOne:c(function h(e,t){return u([e],t)}),upsertMany:c(u),removeOne:c(function v(e,t){return i([e],t)}),removeMany:c(i),map:c(function y(e,t){return o(t.ids.reduce(function(n,r){var i=e(t.entities[r]);return i!==t.entities[r]&&n.push({id:r,changes:i}),n},[]).filter(function(e){return e.id in t.entities}),t)})}}var f=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},h=function h(){};e.createEntityAdapter=function v(e){void 0===e&&(e={});var n=d({sortComparer:!1,selectId:function(e){return e.id}},e),i=n.selectId,o=n.sortComparer,u=function a(){return{getInitialState:function e(t){return void 0===t&&(t={}),Object.assign({ids:[],entities:{}},t)}}}(),h=function v(){return{getSelectors:function e(n){var r=function(e){return e.ids},i=function(e){return e.entities},o=t.createSelector(r,i,function(e,t){return e.map(function(e){return t[e]})}),u=t.createSelector(r,function(e){return e.length});return n?{selectIds:t.createSelector(n,r),selectEntities:t.createSelector(n,i),selectAll:t.createSelector(n,o),selectTotal:t.createSelector(n,u)}:{selectIds:r,selectEntities:i,selectAll:o,selectTotal:u}}}}(),y=o?function p(e,t){var n=l(e);function i(t,n){var i=t.filter(function(t){return!(s(t,e)in n.entities)});return 0===i.length?r.None:(a(i,n),r.Both)}function o(t,n){var i=[],o=t.filter(function(t){return function r(t,n,i){if(!(n.id in i.entities))return!1;var o=Object.assign({},i.entities[n.id],n.changes),u=s(o,e);return delete i.entities[n.id],t.push(o),u!==n.id}(i,t,n)}).length>0;if(0===i.length)return r.None;var u=n.ids,c=[];return n.ids=n.ids.filter(function(e,t){return e in n.entities||(c.push(t),!1)}),a(i,n),!o&&c.every(function(e){return n.ids[e]===u[e]})?r.EntitiesOnly:r.Both}function u(t,n){var u,c,a=[],l=[];try{for(var d=f(t),h=d.next();!h.done;h=d.next()){var v=h.value,y=s(v,e);y in n.entities?l.push({id:y,changes:v}):a.push(v)}}catch(e){u={error:e}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}var p=o(l,n),g=i(a,n);switch(!0){case g===r.None&&p===r.None:return r.None;case g===r.Both||p===r.Both:return r.Both;default:return r.EntitiesOnly}}function a(n,r){n.sort(t);for(var i=[],o=0,u=0;o<n.length&&u<r.ids.length;){var c=n[o],a=s(c,e),l=r.ids[u];t(c,r.entities[l])<=0?(i.push(a),o++):(i.push(l),u++)}r.ids=i.concat(o<n.length?n.slice(o).map(e):r.ids.slice(u)),n.forEach(function(t,n){r.entities[e(t)]=t})}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:c(function d(e,t){return i([e],t)}),updateOne:c(function h(e,t){return o([e],t)}),upsertOne:c(function v(e,t){return u([e],t)}),addAll:c(function y(e,t){return t.entities={},t.ids=[],i(e,t),r.Both}),addMany:c(i),updateMany:c(o),upsertMany:c(u),map:c(function p(e,t){return o(t.ids.reduce(function(n,r){var i=e(t.entities[r]);return i!==t.entities[r]&&n.push({id:r,changes:i}),n},[]),t)})}}(i,o):l(i);return d({selectId:i,sortComparer:o},u,h,y)},e.Dictionary=h,Object.defineProperty(e,"__esModule",{value:!0})});