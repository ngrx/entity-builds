!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@ngrx/store")):"function"==typeof define&&define.amd?define(["exports","@ngrx/store"],t):t((e.ngrx=e.ngrx||{},e.ngrx.entity={}),e.ngrx.store)}(this,function(e,t){"use strict";function n(e){return function(t,n){var i={ids:n.ids.slice(),entities:Object.assign({},n.entities)};return e(t,i)?Object.assign({},n,i):n}}function i(e){function t(t,n){var i=e(t);return!(i in n.entities)&&(n.ids.push(i),n.entities[i]=t,!0)}function i(e,n){var i=!1;for(var r in e)i=t(e[r],n)||i;return i}function r(e,t){var n=e.filter(function(e){return e in t.entities}).map(function(e){return delete t.entities[e]}).length>0;return n&&(t.ids=t.ids.filter(function(e){return e in t.entities})),n}function s(t,n){var i={},r=t.filter(function(e){return e.id in n.entities}).map(function(t){return function(t,n,i){var r=i.entities[n.id],s=Object.assign({},r,n.changes),u=e(s);u!==n.id&&(t[n.id]=u,delete i.entities[n.id]),i.entities[u]=s}(i,t,n)}).length>0;return r&&(n.ids=n.ids.map(function(e){return i[e]||e})),r}return{removeAll:function(e){return Object.assign({},e,{ids:[],entities:{}})},addOne:n(t),addMany:n(i),addAll:n(function(e,t){return t.ids=[],t.entities={},i(e,t),!0}),updateOne:n(function(e,t){return s([e],t)}),updateMany:n(s),removeOne:n(function(e,t){return r([e],t)}),removeMany:n(r)}}function r(e,t){function r(t,n){return u(t.filter(function(t){return!(e(t)in n.entities)}),n)}function s(e,t){var n=[];return e.forEach(function(e){return function(e,t,n){if(t.id in n.entities){var i=n.entities[t.id],r=Object.assign({},i,t.changes);delete n.entities[t.id],e.push(r)}}(n,e,t)}),n.length&&(t.ids=t.ids.filter(function(e){return e in t.entities})),u(n,t)}function u(n,i){if(0===n.length)return!1;n.sort(t);for(var r=[],s=0,u=0;s<n.length&&u<i.ids.length;){var c=n[s],o=e(c),a=i.ids[u],d=i.entities[a];t(c,d)<=0?(r.push(o),s++):(r.push(a),u++)}return s<n.length?i.ids=r.concat(n.slice(s).map(e)):i.ids=r.concat(i.ids.slice(u)),n.forEach(function(t,n){i.entities[e(t)]=t}),!0}var c=i(e);return{removeOne:c.removeOne,removeMany:c.removeMany,removeAll:c.removeAll,addOne:n(function(e,t){return r([e],t)}),updateOne:n(function(e,t){return s([e],t)}),addAll:n(function(e,t){return t.entities={},t.ids=[],r(e,t),!0}),addMany:n(r),updateMany:n(s)}}function s(e){void 0===e&&(e={});var n=Object.assign({sortComparer:!1,selectId:function(e){return e.id}},e),s=n.selectId,u=n.sortComparer,c={getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}},o={getSelectors:function(e){var n=function(e){return e.ids},i=function(e){return e.entities},r=t.createSelector(n,i,function(e,t){return e.map(function(e){return t[e]})}),s=t.createSelector(n,function(e){return e.length});return e?{selectIds:t.createSelector(e,n),selectEntities:t.createSelector(e,i),selectAll:t.createSelector(e,r),selectTotal:t.createSelector(e,s)}:{selectIds:n,selectEntities:i,selectAll:r,selectTotal:s}}},a=u?r(s,u):i(s);return Object.assign({},c,o,a)}e.createEntityAdapter=s,Object.defineProperty(e,"__esModule",{value:!0})});