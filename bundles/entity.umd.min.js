/**
 * @license NgRx 6.0.1
 * (c) 2015-2018 Brandon Roberts, Mike Ryan, Rob Wormald, Victor Savkin
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@ngrx/store")):"function"==typeof define&&define.amd?define("@ngrx/entity",["exports","@ngrx/store"],t):t((e.ngrx=e.ngrx||{},e.ngrx.entity={}),e["@ngrx/store"])}(this,function(e,t){"use strict";var n,r,i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return u},u=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};function c(e){return function t(r,o){var c={ids:u(o.ids),entities:i({},o.entities)},a=e(r,c);return a===n.Both?Object.assign({},o,c):a===n.EntitiesOnly?i({},o,{entities:c.entities}):o}}(r=n||(n={}))[r.EntitiesOnly=0]="EntitiesOnly",r[r.Both=1]="Both",r[r.None=2]="None";var a=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};function s(e){function t(t,r){var i=e(t);return i in r.entities?n.None:(r.ids.push(i),r.entities[i]=t,n.Both)}function r(e,r){var i,o,u=!1;try{for(var c=a(e),s=c.next();!s.done;s=c.next())u=t(s.value,r)!==n.None||u}catch(e){i={error:e}}finally{try{s&&!s.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u?n.Both:n.None}function i(e,t){var r=e.filter(function(e){return e in t.entities}).map(function(e){return delete t.entities[e]}).length>0;return r&&(t.ids=t.ids.filter(function(e){return e in t.entities})),r?n.Both:n.None}function o(t,r){var i={};return(t=t.filter(function(e){return e.id in r.entities})).length>0?t.filter(function(t){return function n(t,r,i){var o=Object.assign({},i.entities[r.id],r.changes),u=e(o),c=u!==r.id;return c&&(t[r.id]=u,delete i.entities[r.id]),i.entities[u]=o,c}(i,t,r)}).length>0?(r.ids=r.ids.map(function(e){return i[e]||e}),n.Both):n.EntitiesOnly:n.None}function u(t,i){var u=[],c=[];try{for(var s=a(t),l=s.next();!l.done;l=s.next()){var f=l.value,d=e(f);d in i.entities?c.push({id:d,changes:f}):u.push(f)}}catch(e){h={error:e}}finally{try{l&&!l.done&&(v=s.return)&&v.call(s)}finally{if(h)throw h.error}}var h,v,y=o(c,i),p=r(u,i);switch(!0){case p===n.None&&y===n.None:return n.None;case p===n.Both||y===n.Both:return n.Both;default:return n.EntitiesOnly}}return{removeAll:function s(e){return Object.assign({},e,{ids:[],entities:{}})},addOne:c(t),addMany:c(r),addAll:c(function l(e,t){return t.ids=[],t.entities={},r(e,t),n.Both}),updateOne:c(function f(e,t){return o([e],t)}),updateMany:c(o),upsertOne:c(function d(e,t){return u([e],t)}),upsertMany:c(u),removeOne:c(function h(e,t){return i([e],t)}),removeMany:c(i)}}var l=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};e.createEntityAdapter=function d(e){void 0===e&&(e={});var r=f({sortComparer:!1,selectId:function(e){return e.id}},e),i=r.selectId,o=r.sortComparer,u=function a(){return{getInitialState:function e(t){return void 0===t&&(t={}),Object.assign({ids:[],entities:{}},t)}}}(),d=function h(){return{getSelectors:function e(n){var r=function(e){return e.ids},i=function(e){return e.entities},o=t.createSelector(r,i,function(e,t){return e.map(function(e){return t[e]})}),u=t.createSelector(r,function(e){return e.length});return n?{selectIds:t.createSelector(n,r),selectEntities:t.createSelector(n,i),selectAll:t.createSelector(n,o),selectTotal:t.createSelector(n,u)}:{selectIds:r,selectEntities:i,selectAll:o,selectTotal:u}}}}(),v=o?function y(e,t){var r=s(e);function i(t,r){var i=t.filter(function(t){return!(e(t)in r.entities)});return 0===i.length?n.None:(a(i,r),n.Both)}function o(t,r){var i=[],o=t.filter(function(t){return function n(t,r,i){if(!(r.id in i.entities))return!1;var o=Object.assign({},i.entities[r.id],r.changes),u=e(o);return delete i.entities[r.id],t.push(o),u!==r.id}(i,t,r)}).length>0;if(0===i.length)return n.None;var u=r.ids,c=[];return r.ids=r.ids.filter(function(e,t){return e in r.entities||(c.push(t),!1)}),a(i,r),!o&&c.every(function(e){return r.ids[e]===u[e]})?n.EntitiesOnly:n.Both}function u(t,r){var u=[],c=[];try{for(var a=l(t),s=a.next();!s.done;s=a.next()){var f=s.value,d=e(f);d in r.entities?c.push({id:d,changes:f}):u.push(f)}}catch(e){h={error:e}}finally{try{s&&!s.done&&(v=a.return)&&v.call(a)}finally{if(h)throw h.error}}var h,v,y=o(c,r),p=i(u,r);switch(!0){case p===n.None&&y===n.None:return n.None;case p===n.Both||y===n.Both:return n.Both;default:return n.EntitiesOnly}}function a(n,r){n.sort(t);for(var i=[],o=0,u=0;o<n.length&&u<r.ids.length;){var c=n[o],a=e(c),s=r.ids[u];t(c,r.entities[s])<=0?(i.push(a),o++):(i.push(s),u++)}r.ids=i.concat(o<n.length?n.slice(o).map(e):r.ids.slice(u)),n.forEach(function(t,n){r.entities[e(t)]=t})}return{removeOne:r.removeOne,removeMany:r.removeMany,removeAll:r.removeAll,addOne:c(function f(e,t){return i([e],t)}),updateOne:c(function d(e,t){return o([e],t)}),upsertOne:c(function h(e,t){return u([e],t)}),addAll:c(function v(e,t){return t.entities={},t.ids=[],i(e,t),n.Both}),addMany:c(i),updateMany:c(o),upsertMany:c(u)}}(i,o):s(i);return f({selectId:i,sortComparer:o},u,d,v)},Object.defineProperty(e,"__esModule",{value:!0})});